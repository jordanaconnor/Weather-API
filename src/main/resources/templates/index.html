<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>My Weather App</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" th:href="@{/css/weather-icons.min.css}">
    <link rel="stylesheet" th:href="@{/css/styles.css}">
    <link rel="icon" href="data:,">
</head>

<body th:class="body">

    <video autoplay muted playsinline loop class="background-video">
        <source th:src="@{/media/videos/Clear_Skies_HD.mp4}" type="video/mp4">
    </video>

    <header class="header">
        <h1 style="text-align: center">Weather Dashboard</h1>
    </header>

    <div class="search-bar">
        <form th:action="@{/}" th:object="${location}" method="post">
            <span class="header-middle"><label>Search:
                <input type="text" id="Search:" placeholder="City or ZIP Code" th:field="*{name}"/>
                <input type="submit" value="Submit" />
                <input type="reset" value="Reset" />
            </label></span>
        </form>
    </div>

    <main  class="center-panel">
        <p th:action="@{/}" th:object="${location}">
        <div>
            <span class="location-name" th:text="${locationName ?: ''}"></span>
            <span class="location-name" th:if="${locationName == 'London'}">, England, United Kingdom</span>
    </div>

        <div class="weather-sections">
            <div class="current-weather">
                <!--Current Weather-->
                <div class="current-weather-icon">
                    <i th:class="${MainService.getWeatherIcon(weather.current.weather_code)}"></i>
                </div>

                <div th:if="${weather.current.temperature_2m != 0.00}">
                    <br><span th:text="${MainService.convertWXCode(weather.current.weather_code)}" /><br><br>
                    <span th:text="'Currently ' + ${weather.current.temperature_2m} + ${weather.current_units.temperature_2m}" /><br>
                    <span th:text="'Feels like: ' + ${weather.current.apparent_temperature} + ${weather.current_units.apparent_temperature}" /><br>
                </div>
            </div>

            <div class="seven-day">
                <h4>7-Day Forecast</h4>
                <article class="day-card">
                    <aside class="Seven-Day-Forecast"
                           th:each="day : ${#numbers.sequence(0, weather.daily.time.size() -1)}"
                           th:if="${MainService.convertDateFormat(weather.daily.time[day]) != 'Jan 01'}">
                        <span class="Daily-DateTime" th:text="${MainService.convertDateFormat(weather.daily.time[day])}"></span>
                        <span class="Daily-Wx-Code" th:text="${MainService.convertWXCode(weather.daily.weather_code[day])}"></span>
                        <span class="Daily-Min-Temp" th:text="${weather.daily.temperature_2m_min[day]}"></span>
                        <span class="Daily-Max-Temp" th:text="${weather.daily.temperature_2m_max[day]}"></span>
                    </aside>
                </article>
            </div>
        </div>


        <h4>Hourly Forecast</h4>
        <div class="scroller">
            <div class="hour-card"
                 th:each="hour : ${#numbers.sequence(0, weather.hourly.temperature_2m.size() -145)}"
                 th:if="${MainService.convertWXCode(weather.hourly.weather_code[hour]) != 0 and weather.hourly.temperature_2m[hour] != 0.00}">
                <span th:text="${MainService.convertWXCode(weather.hourly.weather_code[hour])}"></span>
                <span th:text="${weather.hourly.temperature_2m[hour]}"></span>
            </div>
        </div>

    </main>

</body>
</html>